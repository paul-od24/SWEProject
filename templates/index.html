<!--adapted from https://developers.google.com/maps/documentation/javascript/adding-a-google-map -->
<!DOCTYPE html>
<html>
  <head>
    <title>dbikes23</title> 
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link rel="stylesheet" type="text/css" href="../static/css/style.css" />
    <script type="text/javascript" src="../static/js/index.js"></script>
    <script>
      setPinDic({{ dic|safe }})
  function toggleMarkers() {
     for (let i in pinDic) {
      const stationMarker = stations[pinDic[i]["number"]];
      stationMarker.setVisible(markersVisible);
    }
    markersVisible = !markersVisible;
  }
    </script>
  </head>
  <body>
    
    <div id="main_div">
      <div id="map"></div>
      <div id="weather">
        <h2>DBIKES23 - A real-time Dublin bike availability map </h2>
    <button onclick="toggleMarkers()">Toggle Markers</button>
        <div id="weather_cur"></div>
        <div style="overflow-x:auto;">
          <label for="datetime">Select a date and time:</label>
          <input type="datetime-local" id="datetime" name="datetime">
          <div>
            <input id="autocomplete_search" type="text" size="50" style="margin-bottom: 20px; margin-right: 20px">
          <button type="button" onclick="getCurrentLocation()">Use Current Location</button></div>
      <div id="travel"><label for="mode">   Travel Mode:</label>
      <select id="mode">
        <option value="DRIVING">Driving</option>
        <option value="WALKING">Walking</option>
        <option value="BICYCLING">Cycling</option>
        <option value="TRANSIT">Public Transport</option>
      </select><button type="button" onclick="sendLoc()">Find closest station</button>
    </div>
    <div id="stationInfo"></div>
      
          <table id="weather_48">
          </table>
        </div>
        <div style="overflow-x:auto;">
          <table id="weather_week">
          </table>   
        </div>
      </div>
    </div>
    <script
      src="https://maps.googleapis.com/maps/api/js?key={{mapkey}}&libraries=places&callback=initMap&v=weekly"
      defer
    >
    </script>
    <script>
      popWeatherCurrent({{wCur|safe}});
      popWeather48({{wetDic|safe}});
      popWeatherWeek({{wetDic|safe}});
    </script>

    <div id="station"></div>
    <div id="route"></div>
  </body>
</html>